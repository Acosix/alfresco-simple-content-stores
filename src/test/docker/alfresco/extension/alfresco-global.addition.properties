# 
# Copyright 2017 - 2022 Acosix GmbH
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# note: this file is not named alfresco-global.properties to not override the default file in the image
# instead it relies on Dockerfile post-processing to merge with the default file

# Enable addon and configure common / sensible constellations of stores

simpleContentStores.enabled=true

# need eager orphan cleanup for move related tests
system.content.eagerOrphanCleanup=true

# IDs limited by Alfresco database schema to 20 characters
simpleContentStores.encryption.keystoreIds=scs-effs,scs-aesks

simpleContentStores.encryption.keystore.scs-effs.location=classpath:alfresco/extension/encryption.keystore
simpleContentStores.encryption.keystore.scs-effs.password.location=classpath:alfresco/extension/encryption-keystore-password
simpleContentStores.encryption.keystore.scs-effs.type=JKS
# aliases limited by Alfresco database schema to 15 characters
simpleContentStores.encryption.keystore.scs-effs.aliases=effs
simpleContentStores.encryption.keystore.scs-effs.effs.password.location=classpath:alfresco/extension/encryption-keystore-effs-password

# scs-aesks tests different keystore format, different master key type, multiple (randomly picked) master keys, and also basis for any re-encryption tests
# properties actually provided via -D flags (see pom.xml) to also test flexible lookup

simpleContentStores.customStores=globalSiteRoutingStore,defaultTenantFileContentStore,siteRoutingFileStore1,siteRoutingFileStore2,compressingFileFacadeStore,compressingFileStore,deduplicatingFileFacadeStore,deduplicatingFileStore,encryptingFileFacadeStore,encryptingFileStore,propertySelectorStore1,propertySelectorStore2,propertySelectorFileStore11,propertySelectorFileStore12,propertySelectorFileStore21,propertySelectorFileStore22,propertySelectorFallbackFileStore,typeRoutingStore1,typeRoutingStore2,typeRoutingFileStore1,typeRoutingFileStore2,typeRoutingFallbackFileStore1,typeRoutingFallbackFileStore2
simpleContentStores.rootStore=globalSiteRoutingStore

simpleContentStores.customStore.globalSiteRoutingStore.type=siteRoutingStore
# non-site content is stored in default contentstore
simpleContentStores.customStore.globalSiteRoutingStore.ref.fallbackStore=defaultTenantFileContentStore
simpleContentStores.customStore.globalSiteRoutingStore.value.moveStoresOnNodeMoveOrCopy=true

# simple site-routing file store for arbitrary site content
# "special" generic site names: generic-site-1 and generic-site-2
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySitePreset.ref.site-dashboard=siteRoutingFileStore1
simpleContentStores.customStore.siteRoutingFileStore1.type=siteRoutingFileStore
simpleContentStores.customStore.siteRoutingFileStore1.value.rootDirectory=${dir.root}/siteRoutingFileStore1/default
simpleContentStores.customStore.siteRoutingFileStore1.map.rootAbsolutePathsBySite.value.explicitly-routed-site-1=${dir.root}/siteRoutingFileStore1/site-1
simpleContentStores.customStore.siteRoutingFileStore1.map.rootAbsolutePathsBySite.value.explicitly-routed-site-2=${dir.root}/siteRoutingFileStore1/site-2
simpleContentStores.customStore.siteRoutingFileStore1.map.rootAbsolutePathsBySitePreset.value.site-dashboard=${dir.root}/siteRoutingFileStore1/.otherSites
simpleContentStores.customStore.siteRoutingFileStore1.value.protocol=srfs-site-store-1
simpleContentStores.customStore.siteRoutingFileStore1.map.protocolsBySitePreset.value.site-dashboard=srfs-site-dashboard-store-1
simpleContentStores.customStore.siteRoutingFileStore1.map.protocolsBySite.value.explicitly-routed-site-1=srfs-explicitly-routed-site-1-store
simpleContentStores.customStore.siteRoutingFileStore1.map.protocolsBySite.value.explicitly-routed-site-2=srfs-explicitly-routed-site-2-store
simpleContentStores.customStore.siteRoutingFileStore1.value.moveStoresOnNodeMoveOrCopy=true
simpleContentStores.customStore.siteRoutingFileStore1.value.useSiteFolderInGenericDirectories=true

# simple site-routing file store for to test different config (non-move)
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.explicitly-routed-site-3=siteRoutingFileStore2
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.explicitly-routed-site-4=siteRoutingFileStore2
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.genericly-routed-site-3=siteRoutingFileStore2
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.genericly-routed-site-4=siteRoutingFileStore2
simpleContentStores.customStore.siteRoutingFileStore2.type=siteRoutingFileStore
simpleContentStores.customStore.siteRoutingFileStore2.value.rootDirectory=${dir.root}/siteRoutingFileStore2/default
simpleContentStores.customStore.siteRoutingFileStore2.map.rootAbsolutePathsBySite.value.explicitly-routed-site-3=${dir.root}/siteRoutingFileStore2/sharedExplicitSites
simpleContentStores.customStore.siteRoutingFileStore2.map.rootAbsolutePathsBySite.value.explicitly-routed-site-4=${dir.root}/siteRoutingFileStore2/sharedExplicitSites
simpleContentStores.customStore.siteRoutingFileStore2.map.rootAbsolutePathsBySitePreset.value.site-dashboard=${dir.root}/siteRoutingFileStore2/sharedGenericSites
simpleContentStores.customStore.siteRoutingFileStore2.value.protocol=srfs-site-store-2
simpleContentStores.customStore.siteRoutingFileStore2.map.protocolsBySitePreset.value.site-dashboard=srfs-site-dashboard-store-2
simpleContentStores.customStore.siteRoutingFileStore2.map.protocolsBySite.value.explicitly-routed-site-3=srfs-explicitly-routed-site-3-store
simpleContentStores.customStore.siteRoutingFileStore2.map.protocolsBySite.value.explicitly-routed-site-4=srfs-explicitly-routed-site-4-store
simpleContentStores.customStore.siteRoutingFileStore2.value.moveStoresOnNodeMoveOrCopy=false
simpleContentStores.customStore.siteRoutingFileStore2.value.useSiteFolderInGenericDirectories=false

# file store with compression facade
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.compressing-file-facade=compressingFileFacadeStore
simpleContentStores.customStore.compressingFileFacadeStore.type=compressingFacadeStore
simpleContentStores.customStore.compressingFileFacadeStore.ref.backingStore=compressingFileStore
simpleContentStores.customStore.compressingFileFacadeStore.list.value.mimetypesToCompress=text/*,application/json,application/xhtml+xml,image/svg+xml,application/eps,application/x-javascript,application/atom+xml,application/rss+xml,message/rfc822

simpleContentStores.customStore.compressingFileStore.type=standardFileStore
simpleContentStores.customStore.compressingFileStore.value.rootDirectory=${dir.root}/compressingFileFacadeStore
simpleContentStores.customStore.compressingFileStore.value.protocol=cffs-store
simpleContentStores.customStore.compressingFileStore.value.allowRandomAccess=true
simpleContentStores.customStore.compressingFileStore.value.deleteEmptyDirs=true

# file store with deduplicating facade
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.deduplicating-file-facade=deduplicatingFileFacadeStore
simpleContentStores.customStore.deduplicatingFileFacadeStore.type=deduplicatingFacadeStore
simpleContentStores.customStore.deduplicatingFileFacadeStore.ref.backingStore=deduplicatingFileStore

simpleContentStores.customStore.deduplicatingFileStore.type=standardFileStore
simpleContentStores.customStore.deduplicatingFileStore.value.rootDirectory=${dir.root}/deduplicatingFileFacadeStore
simpleContentStores.customStore.deduplicatingFileStore.value.protocol=dffs-store
simpleContentStores.customStore.deduplicatingFileStore.value.allowRandomAccess=true
simpleContentStores.customStore.deduplicatingFileStore.value.deleteEmptyDirs=true

# file store with encrypting facade
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.encrypting-file-facade=encryptingFileFacadeStore
simpleContentStores.customStore.encryptingFileFacadeStore.type=encryptingFacadeStore
simpleContentStores.customStore.encryptingFileFacadeStore.ref.backingStore=encryptingFileStore

simpleContentStores.customStore.encryptingFileStore.type=standardFileStore
simpleContentStores.customStore.encryptingFileStore.value.rootDirectory=${dir.root}/encryptingFileFacadeStore
simpleContentStores.customStore.encryptingFileStore.value.protocol=effs-store
simpleContentStores.customStore.encryptingFileStore.value.allowRandomAccess=true
simpleContentStores.customStore.encryptingFileStore.value.deleteEmptyDirs=true

# property selector stores (with one shared fallback store, different moveStore configuration)
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.property-selector-1=propertySelectorStore1
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.property-selector-2=propertySelectorStore2

simpleContentStores.customStore.propertySelectorStore1.type=selectorPropertyRoutingStore
simpleContentStores.customStore.propertySelectorStore1.value.selectorClassName=aco6scst:propertySelectorAspect
simpleContentStores.customStore.propertySelectorStore1.value.selectorPropertyName=aco6scst:selectorProperty
simpleContentStores.customStore.propertySelectorStore1.value.moveStoresOnChange=true
simpleContentStores.customStore.propertySelectorStore1.value.moveStoresOnChangeOptionPropertyName=aco6scst:moveStoreOnSelectorChange
simpleContentStores.customStore.propertySelectorStore1.map.storeBySelectorPropertyValue.ref.store1=propertySelectorFileStore11
simpleContentStores.customStore.propertySelectorStore1.map.storeBySelectorPropertyValue.ref.store2=propertySelectorFileStore12
simpleContentStores.customStore.propertySelectorStore1.ref.fallbackStore=propertySelectorFallbackFileStore

simpleContentStores.customStore.propertySelectorStore2.type=selectorPropertyRoutingStore
simpleContentStores.customStore.propertySelectorStore2.value.selectorClassName=aco6scst:propertySelectorAspect
simpleContentStores.customStore.propertySelectorStore2.value.selectorPropertyName=aco6scst:selectorProperty
simpleContentStores.customStore.propertySelectorStore2.map.storeBySelectorPropertyValue.ref.store1=propertySelectorFileStore21
simpleContentStores.customStore.propertySelectorStore2.map.storeBySelectorPropertyValue.ref.store2=propertySelectorFileStore22
simpleContentStores.customStore.propertySelectorStore2.ref.fallbackStore=propertySelectorFallbackFileStore

simpleContentStores.customStore.propertySelectorFileStore11.type=standardFileStore
simpleContentStores.customStore.propertySelectorFileStore11.value.rootDirectory=${dir.root}/propertySelectorFileStore11
simpleContentStores.customStore.propertySelectorFileStore11.value.protocol=psfs-store-11
simpleContentStores.customStore.propertySelectorFileStore11.value.allowRandomAccess=true
simpleContentStores.customStore.propertySelectorFileStore11.value.deleteEmptyDirs=true

simpleContentStores.customStore.propertySelectorFileStore12.type=standardFileStore
simpleContentStores.customStore.propertySelectorFileStore12.value.rootDirectory=${dir.root}/propertySelectorFileStore12
simpleContentStores.customStore.propertySelectorFileStore12.value.protocol=psfs-store-12
simpleContentStores.customStore.propertySelectorFileStore12.value.allowRandomAccess=true
simpleContentStores.customStore.propertySelectorFileStore12.value.deleteEmptyDirs=true

simpleContentStores.customStore.propertySelectorFileStore21.type=standardFileStore
simpleContentStores.customStore.propertySelectorFileStore21.value.rootDirectory=${dir.root}/propertySelectorFileStore21
simpleContentStores.customStore.propertySelectorFileStore21.value.protocol=psfs-store-21
simpleContentStores.customStore.propertySelectorFileStore21.value.allowRandomAccess=true
simpleContentStores.customStore.propertySelectorFileStore21.value.deleteEmptyDirs=true

simpleContentStores.customStore.propertySelectorFileStore22.type=standardFileStore
simpleContentStores.customStore.propertySelectorFileStore22.value.rootDirectory=${dir.root}/propertySelectorFileStore22
simpleContentStores.customStore.propertySelectorFileStore22.value.protocol=psfs-store-22
simpleContentStores.customStore.propertySelectorFileStore22.value.allowRandomAccess=true
simpleContentStores.customStore.propertySelectorFileStore22.value.deleteEmptyDirs=true

simpleContentStores.customStore.propertySelectorFallbackFileStore.type=standardFileStore
simpleContentStores.customStore.propertySelectorFallbackFileStore.value.rootDirectory=${dir.root}/propertySelectorFallbackFileStore
simpleContentStores.customStore.propertySelectorFallbackFileStore.value.protocol=psfs-store-fb
simpleContentStores.customStore.propertySelectorFallbackFileStore.value.allowRandomAccess=true
simpleContentStores.customStore.propertySelectorFallbackFileStore.value.deleteEmptyDirs=true

# type selector stores (with one shared fallback store, different moveStore configuration)
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.type-routing-1=typeRoutingStore1
simpleContentStores.customStore.globalSiteRoutingStore.map.storeBySite.ref.type-routing-2=typeRoutingStore2

simpleContentStores.customStore.typeRoutingStore1.type=typeRoutingStore
simpleContentStores.customStore.typeRoutingStore1.value.moveStoresOnChange=true
simpleContentStores.customStore.typeRoutingStore1.value.moveStoresOnChangeOptionPropertyName=aco6scst:moveStoreOnSelectorChange
simpleContentStores.customStore.typeRoutingStore1.ref.fallbackStore=typeRoutingFallbackFileStore1
simpleContentStores.customStore.typeRoutingStore1.map.storeByTypeName.ref.aco6scst\:archiveDocument=typeRoutingFileStore1

simpleContentStores.customStore.typeRoutingStore2.type=typeRoutingStore
simpleContentStores.customStore.typeRoutingStore2.ref.fallbackStore=typeRoutingFallbackFileStore2
simpleContentStores.customStore.typeRoutingStore2.map.storeByTypeName.ref.aco6scst\:archiveDocument=typeRoutingFileStore2

simpleContentStores.customStore.typeRoutingFileStore1.type=standardFileStore
simpleContentStores.customStore.typeRoutingFileStore1.value.rootDirectory=${dir.root}/typeRoutingFileStore1
simpleContentStores.customStore.typeRoutingFileStore1.value.protocol=trs-store-1
simpleContentStores.customStore.typeRoutingFileStore1.value.allowRandomAccess=true
simpleContentStores.customStore.typeRoutingFileStore1.value.deleteEmptyDirs=true

simpleContentStores.customStore.typeRoutingFileStore2.type=standardFileStore
simpleContentStores.customStore.typeRoutingFileStore2.value.rootDirectory=${dir.root}/typeRoutingFileStore2
simpleContentStores.customStore.typeRoutingFileStore2.value.protocol=trs-store-2
simpleContentStores.customStore.typeRoutingFileStore2.value.allowRandomAccess=true
simpleContentStores.customStore.typeRoutingFileStore2.value.deleteEmptyDirs=true

simpleContentStores.customStore.typeRoutingFallbackFileStore1.type=standardFileStore
simpleContentStores.customStore.typeRoutingFallbackFileStore1.value.rootDirectory=${dir.root}/typeRoutingFallbackFileStore1
simpleContentStores.customStore.typeRoutingFallbackFileStore1.value.protocol=trs-store-fb-1
simpleContentStores.customStore.typeRoutingFallbackFileStore1.value.allowRandomAccess=true
simpleContentStores.customStore.typeRoutingFallbackFileStore1.value.deleteEmptyDirs=true

simpleContentStores.customStore.typeRoutingFallbackFileStore2.type=standardFileStore
simpleContentStores.customStore.typeRoutingFallbackFileStore2.value.rootDirectory=${dir.root}/typeRoutingFallbackFileStore2
simpleContentStores.customStore.typeRoutingFallbackFileStore2.value.protocol=trs-store-fb-2
simpleContentStores.customStore.typeRoutingFallbackFileStore2.value.allowRandomAccess=true
simpleContentStores.customStore.typeRoutingFallbackFileStore2.value.deleteEmptyDirs=true

# add our plugin to list of (known) ones that are activateable
#ootbee-support-tools.command-console.plugins=global,permissions,subsystems,simple-content-stores